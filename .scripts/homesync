#!/usr/bin/env bash
rsync -azvhP --delete-excluded --exclude-from '/home/zijian/.scripts/.rsyncexclude' /home/zijian/ /mnt/main/.backup/

if [[ -f Qqen ]]
then
    rm Qqen
    echo 'removed old Qqen'
fi

if [[ -f Qqem ]]
then
    rm Qqem
    ehco 'removed old Qqem'
fi

pacman -Qqen > Qqen
mv Qqen /mnt/main/.backup
echo 'created a list of explicitly installed packages'

pacman -Qqem > Qqem
mv Qqem /mnt/main/.backup
echo 'created a list of foreign packages (installed from AUR)'
