#!/usr/bin/env bash

DEST=${1:-"/mnt/main/.home_backup"}

log=$HOME/homesync.log
rsync -azvhP --delete-excluded --exclude-from "$HOME/.scripts/.rsyncexclude" $HOME $DEST >> $log 2>&1

pacman -Qqen > $HOME/.config/Qqen && cp -f $HOME/.config/Qqen $DEST
pacman -Qqem > $HOME/.config/Qqem && cp -f $HOME/.config/Qqem $DEST
systemctl list-unit-files --state=enabled > $HOME/.config/systemd-unit-files \
	&& cp -f $HOME/.config/system-unit-files $DEST
