#!/usr/bin/env bash

pgrep -x nordvpnd && notify-send -u low "nordvpnd already exists" && exit 1

expect <<- DONE
	set timeout -1
	spawn systemctl start nordvpnd
	expect "*?assword:*"
	send -- "$(pass user-zijian)"
	send -- "\r"
	expect eof
DONE

if systemctl status nordvpnd | grep -q '\bactive'; then
	notify-send -u low "nordvpnd started successfully"
else
	notify-send -u low "starting nordvpnd failed" && exit 1
fi

nordvpn connect France || notify-send -u low "connection failed"
