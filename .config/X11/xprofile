# disable beep
xset -b

# key repeat
xset r rate 250 60

# compose key
setxkbmap -option compose:ralt

# powertop auto-tune
[ $(cat /sys/class/power_supply/AC/online) -eq 0 ] && sudo powertop --auto-tune &

# screen timeouts
if [ $(cat /sys/class/power_supply/AC/online) -eq 1 ];
then
    xset dpms 600 600 900
else
    xset dpms 300 300 600
fi

# laptop
xinput set-prop "Synaptics TM3276-022" "Device Enabled" 0
xinput set-prop "TPPS/2 IBM TrackPoint" "libinput Accel Speed" 0.4
xinput set-button-map "TPPS/2 IBM TrackPoint" 1 0 3
xinput disable $(xinput | awk '/Touch System/ {print}' | grep -Po 'id=\K\d+')

# trackpoint keyboard
for id in $(xinput list |
    grep 'Lenovo TrackPoint Keyboard II' |
    sed 's/.*=\([0-9]\+\).*/\1/');
do
    xinput list-props $id | grep -q 'libinput Accel Speed' &&
	xinput set-prop $id 'libinput Accel Speed' -0.1 &&
	xinput set-button-map $id 1 0 3
done

# auto switch audio upon bluetooth connect
pactl list | grep -q module-switch-on-connect ||
    pactl load-module module-switch-on-connect
