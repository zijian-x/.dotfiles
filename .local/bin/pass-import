#!/usr/bin/env bash

file="$1"
[[ -z "$file" || ! -e "$file" ]] && echo "file not found" && exit 1

while read -r line;
do
    name="$(echo "$line" | awk -F',' '{print $1}')"
    url="$(echo "$line" | awk -F',' '{print $2}')"
    username="$(echo "$line" | awk -F',' '{print $3}')"
    password="$(echo "$line" | awk -F',' '{print $4}')"

    if [[ -n "$name" ]];
    then
	printf "$password\nURL: $url\nUsername: $username\n" | pass insert -m --force "$name"
    fi
done < "$file"
