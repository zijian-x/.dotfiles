#!/usr/bin/env bash

config=${XDG_CONFIG_HOME:-$HOME/.config}/alacritty/window.yml

no_pad=20
pad_x=200
pad_y=51

pad()
{
    sed -i "0,/x: [[:digit:]]\+/s/x: [[:digit:]]\+/x: $pad_x/" "$config" &&
	sed -i "0,/y: [[:digit:]]\+/s/y: [[:digit:]]\+/y: $pad_y/" "$config"
}

unpad()
{
    sed -i "0,/x: [[:digit:]]\+/s/x: [[:digit:]]\+/x: $no_pad/" "$config" &&
	sed -i "0,/y: [[:digit:]]\+/s/y: [[:digit:]]\+/y: $no_pad/" "$config"
}

toggle()
{
    cur_val=$(grep -A2 "padding:" "$config" | awk '/x:/{print $2}')

    if [[ "$cur_val" -eq "$pad_x" ]]; then
	unpad
    else
	pad
    fi
}

main()
{
    [[ $# -eq 0 ]] && toggle && exit 0

    case "$1" in
	pad)
	    pad
	    ;;
	unpad)
	    unpad
	    ;;
	*)
	    echo "Error: unknown operation: $1"
	    exit 1
	    ;;
    esac

    exit 0
}

main "$@"
